# Домашнее задание к занятию "`Репликация и масштабирование. Часть 2`" - `Гривняшкин Роман`  

---

### Задание 1  

`Модель 1: Активный Master и пассивный репликационный Slave-сервер.`  
  
`Преимущества:`  
`  - Простота и предсказуемость.`  
`  - Минимальный риск несогласованности данных.`  
`  - Идеально для аварийного восстановления.`  
  
`Недостатки:`  
`  - Неэффективное использование ресурсов. Slave-сервер в основном простаивает.`  
`  - Ограничение масштабирования. Вся нагрузка на master-сервере.`  
`  - Высокая нагрузка на master.`  
  
`Модель 2: Master-сервер и несколько Slave-серверов.`  
  
`Преимущества:`  
`  - Высокая производительность и масштабируемость чтения.`  
`  - Эффективное использование ресурсов.`  
`  - Повышенная отказоустойчивость. В отличие от схемы с одним slave, падение сервера лишь приведет к некоторому снижению производительности.`  
`  - Гибкость. Можно распределять задачи между slave-серверами.`  
  
`Недостатки:`  
`  - Выше сложность архитектуры в настройке и поддержке.`  
`  - Выше риск рассогласованности данных.`  

---

### Задание 2  

`К примеру, имеется три таблицы со следующим набором полей:`  
  
`  - users (user_id, email, password_hash, name, country_code)`  
`  - books (book_id, title, author, genre, price)`  
`  - shops (shop_id, name, location, manager_id)`  

`В качестве вертикального шардирования вынесем каждую из них в отдельную БД, отвечающую за свою область информации:`  
  
`  - сервер UserDB, таблица users отвечает за аутентификацию, профили;`  
`  - сервер BookDB, таблица books отвечает за каталог товаров;`  
`  - сервер ShopDB, таблица shops твечает за точки продаж и управление;`  
  
`В качестве горизонтального шардирования будем использовать следующие ключи:`  
  
`  - users по country_code, чтобы обеспечить требования законодательств разных стран к хранению и обработке персональных данных, например;`  
`  - books по genre. Первая мысль была по алфавиту в первых буквах названия или автора, но по жанру, по-моему, идеально. Люди часто ищут книги по жанру;`  
`  - shops по location;`
  
`Наскальная живопись:`  
![Схема](./img/scheme.png)

`Наше приложение или какой-нибудь ProxySQL маршрутизирует запросы в соответствующие шарды для каждого сервера.`  
`Кажый шард на каждом сервере на самом деле является кластером: один master, несколько slave.`  
`А все кластеры системы независимы друг от друга.`
